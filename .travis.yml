sudo: required
language: go
services:
  - docker
go:
- master
- 1.10.x
- 1.9.x
- 1.8.x
install:
- go get -u github.com/golang/lint/golint
- go get -u github.com/golang/dep/cmd/dep
script:
- dirs=$(go list ./...)
- test -z "$(gofmt -s -l -w $(find ./* -type d -print) | tee /dev/stderr)"
- test -z "`for d in $dirs; do golint $d | tee /dev/stderr; done`"
- test -z "$(go vet ./... |  grep -v 'refers to unknown identifier' | tee /dev/stderr)"
- dep ensure
- test -z "`for d in $dirs; do go build $d | grep -v 'no non-test Go files in' | tee /dev/stderr; done`"
- bash tools/build_on_travis.sh
env:
  global:
  - secure: ECGHjJfDguLiJw8wjqkYRqt3vpAk9/ZPMVUSFgoeGEcU2wOCrAZQqnuDX5MhMtYYnlFHbeRTxI1tVP+y4kMae2osvE0nE76Hp0Xi2STYRe2RDm1zJJ5aqt6//inpuO5qMeJPazpWlrigF9vo9zWgLZsIUhH5fLgDP0GUPhcToAvOKPQ+oXRT81Et/Y5NfTGgJKjVYwM65OUB5h6ZvsKqu4s9jqlHP4UKVkjAVJONXftEd+MveYxGlnIvqPqYjvOH58qrRenv6MPHysdf8dIvctxQf12wPh2XAAgDCpn038bUfghNkRHedodEs/CZw//ijPJ6/UFBG1/ivNw2WUaFeo0klQdtkCfzesFdBWJVen7keBIfjkde0jBafOkLzfsVIyNpOCyb96JIWP81Bl8NVV/R2KkzeHdu+h4QXWyni0UDzZBzbhXJLOSKdiHioMR9WmXlv0snzvSkcGa1353EDkDo1LzfaVJMKHkcLqBGaUZfEwPBGvDq4IJ9vLuO2OKFI0EFY+vNUFHRD3XkDcxOYvrbaG3n9oz+JiywrHcXL/Yop/nI/mR9XYivdAOPoQP0k+eTRHkiCMVDT6eiO0KXqzaoulUeukdFkvNEBZf3KQd7v6zPct4zTcQJsNGKLEeFnJXjpHkRmLPuCBVQFY3apAaFYeMN+1ixWG2Pi7GW8J8=
  - secure: T+oLIqeSifPVocpZEGtrFuROVemcXRebBtpKWx18caYnR4IXYv1dPRg58y3muKSs29B4ZJLORH9BLOsgg44NISmvsAPrqbXHDqZm8G4JF4SVI8z7rsn2uviFylSlrMBG20K+z1tCrvTdzegMyE+9g5V8eSBLfWki2bLHTpuJp11WPyZpTGl6obcdEvX+yON/9VkMxr/8oBVn4ItntOucaVfNCHUQh2p0Y0111nPVfN0Fou2Tge3FjtDwcSVL8QDpWdkJjXen7bXFjWp9vYNOx0M4ryjJmYIEEOWlTiL65929Xpw7eY5sm5swMxBTJ9ERrDEKxsDEUWiVV+jXqqutFVBqALkDi0IylmkuV7+YlJPoBdE4p+/un05C4TZ/tdbly9AJwigZNom8P8Bc8BUaHx0Gd8zECEMpBP8BUP3GXyyJ+dMRIaKCSnc65Rp36zkC9SBXzgybpFD8ym2qB0arqXV4iwAVGZ6rstLGWpGINWxQmqy9Cr2q0F3FeC01jth4NPAjDI3rwCSZd1CSqrZ03GZLc4Mvu/rwnGg8EXwK3bRg4f8JlqlYoELuQm823Fl2kZTk5TMK7LL2JmKM4MbvhKKlR9UZdustdbeHYvpJByg2V3OarcfbXbbCgQOalgsXZr8B7O1x358qzALNONMnb/FaAZR7sfKnyuWl5518o8Y=
