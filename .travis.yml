language: go
go:
- 1.9.x
- 1.8.x
install:
- go get -u github.com/golang/lint/golint
- go get -u github.com/golang/dep/cmd/dep
script:
- dirs=$(go list ./...)
- test -z "$(gofmt -s -l -w $(find ./* -type d -print) | tee /dev/stderr)"
- golint ./...
- test -z "$(go vet ./... |  grep -v 'refers to unknown identifier' | tee /dev/stderr)"
- dep ensure
- test -z "`for d in $dirs; do go build $d | grep -v 'no non-test Go files in' | tee /dev/stderr; done`"
- travis_wait 30 bash tools/ci.sh
env:
  global:
  - secure: ru2HdftzMo4BM8CP6vT7Zs3bROIGu+VuW033Tac3iVwEiXBWdbGO7AB2pCmfGwrm0Id1qVbjwF7MnS6J4ih8vLm6TQu1z7lyRTUTzrzpCnJSps6Fgr2vhj4V7AMWMMRQtDv1I3cdKQlEzYtvQbBpAVACFta3N9Qj4E4odL3eRIAz3b+yEZDBYeX5zxPBUHa2NJd+QprkUElo3OqYWVBaPFinSFdlHIV/mtLK3Jt5UJGTUcdjc+DABP7ezFZr5OFE4NN3aAT9TF26ueOavRDQ5g5JJWFbzXMnv8TDwvHk/JI2FmAdPNOeL7FGcjMZw7FAdfBHr9HIEKBCW/vB1TsMULn1TWBrTC+C4vqwxyVwwmPuwJXdhILjfqIgKZDpDOcU9j2AFXRFAojgNsFT76m9TDlW62jcAVsl5YaTb2HGwenhXjvY6DAoaxQcZvVSXOIKFnNrG4KKgunQ+tcXGz2ctJJclTsUHN/8ieYTRxzJyEVv2wb6Tdg/UrHP8JRXp67ZVFTBUDs9vIW0ig/G1uqsRTJ8M5AVbN3jOCWyWQew3dHtwmm/e4rHP8qPsQraZe5F6nCLhX0o/d8L6sMV2fh1f3H0brrPNA00YyFsnJQpwbBPPZdHgDM6bsFjejUw5piAMIvqOFYNCy9BYG8GKTaoHIol1LkxRf/v+E4zNmE0Q1I=
  - secure: OcfeVwBb4sDuUnLI1igBxjhN6DJYPCj45nBidO/IIXUzEYzyjmjZKmCqix+h47AeMnrxec+W6bWrg/FWm0O4MuFDpPr8cumBxcy/93zRAKjSW/+vNYRZPm95A3rRwQIQ6NpjbO3z0rzg2JK3a4UgY99ZPXQlb9LKx3wo1JjSn4NQxQ1uN8EDwgUG2qsSxIccXqwp32YzRojeu/hxIKt9XCmceYkKpMnAbBLR6tX2eIYPEmpXvYplaT7RJBSS+IB4PsmDf5v92mEGXV8D5FVIl5eGQSHpia0oObJoxNrUGiZegMdzxFVM/WXK2jf6H++YcoNMK1vMvUgsYhG1jbJfJECd4rUtOXshdNJaBiQE+9MaWe9TbNfmmrpSzX6Oi6pKArSW+JY2ftLSLjdo1vV600yaBTF4VAheRsC2mwc7qbuIKoXgrr3Qnxkkt05oGlSrRl7dbVHLIzSUkIKYq7cb3ytdE5HWiFfgXXVE3MpFPDYg3xqKFpqelOyF5LPDLNVzdilnJEcvJeaxGDYQ2yQP0P4zRfM3falHDyvLSMcNsj4/Qy9rrPdR6IK18kyT3oUvx8EucEMQwLCL9dcy9MKz/4HQyWDvMb2yM29V9KP1apmGN3wWSmlj9taOTA6pYhiCN/WJaFbNxvqk7uEEUk7t4YN4/2n0nv/Afm+6ucW+rO4=
  - secure: JnFnVJjHN2vakMKTXF2JPqaT1C9n/iP03c58+Pccp/vkPRSwNpWTvydcE6QGdFQs2pTWnPvgoXSvVtR9zpPpzD1+Nx/J3S2rVYi9tUapsBGlTrSTa2AHdELI6/DR+EvC1um+PlNv+DvjzQLxukowkCGplkCvmZT+lJa+CQRNXuQ69i5GR/5XlQDR067RjX3t4DwBNe+d97Pk9kYXxbcS7TypqGLBCVJ7raaT9wjctrOce7vgrCd/xlVN4OgKg8oPy8ILz8nyeiUQ2MNNAoPmIjJo0NvRP/Sh/VZOQKw9K8+jyWiFldkLeCl+SbQhEiPNCrJ51AWtTIk7QPInnbyy1jgveY0pHTBGMjNiN3YdYAfS2ZYB+jCCB1RJIDUGebRM67jVfCYi9MNA+tUzvFfsxrBcYU+ETmCTbhggj2wo+ChO67OZQcBgWPjwQc2Cq4JgLi7wrsNXSN9dno3VdWqetSjQSV1v3wxBBlaHW9dfh/YFtfNAiFlEji8SsyfzrsuoH0JMqvBYomIL3ySbUixHrtglAyOsn9EdGQyL+SkHsHxY8f+zm2/Ec94IEQGuXSOb5YEu12+iR/NZR2w+U7MnyhQs3Yjv9Cwis1a7ZvbCRjQm5pcqwJeAdFfgtQHp2tDLkbKj/23gkpKrQURRL1zKqiFNgbjMv/z7dnxUaTMinCA=
  - secure: c6ia47XKJwkyknFRS8Nln1vE1qvN5/ik3HxkIb/LKQqnjzZgrp6QdNG0cArzt5VBKfGxLSPGMyr/WiSp06MMmZg4S94QT2rjvMBOYPpdz2olinYyngyk1H7Zhcq5w7/G6SRw0hrv8OKDPUDjEgqUdNcCS66RmRwm6r5fYGaCjsITAKHwjFA04HbKVJ0D6tX78kgW17lfacTH29dBW4/TxrZznfmG26oTukwY8bv3567UPuWC0rVzRtmfDYP7gD9Igh+m8oh0Pfyj2/KuZqCKPFdOvxnjoKhXC3Xkblgq4w2Y00//s0VdzgrH4/QhugmBPMlVZJtIinRxjZE49pLzdPlT+7eaQMCRfgBtjdUiggNZiAWUKIPaibyGTulsb3hJFc7yMqX42Brl+apbsXlO4AZO9zk3p1ytff+GDknBagNS0qfr+WiFV1PdVy2nIwGiYirBqtyzDfElnMYSFTh24R0tjCoGCVOffk/CyXkh75mWxe8ua1WpfrQ9/hJvMn7ImHOWuQ0fV8OleyA/PlY5KtbRCuxor/U60/1pAyGXQT7pv+Xrsxvj2SQpKFZ+QSlRapY5WDYDCMmk6dUt7e38NTW8EwNVdU1p5rV0I1RmtOAqMOaFB3741SQe2bJr65fkIFO/wNx0TKYZtGNkuz9V3o99UsU8ZuGM1MQxFoiJ/2E=
